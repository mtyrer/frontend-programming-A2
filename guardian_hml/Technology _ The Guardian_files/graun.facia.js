webpackJsonp([6],{433:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},442:function(t,e,n){(function(t){var a,o;a=[n(141)],void 0!==(o=function(t){function e(e){for(var n in e)e.hasOwnProperty(n)&&t.set(o+"."+n,e[n])}function n(e){return!1!==t.get(o+"."+e)}function a(t){return!0===n(t)}var o="accessibility";return{KEY_PREFIX:o,saveState:e,isOn:a}}.apply(e,a))&&(t.exports=o)}).call(e,n(433)(t))},443:function(t,e,n){var a,o;a=[n(17),n(4),n(24),n(430),n(46)],void 0!==(o=function(t,e,n,a,o){function i(t,n){var a={conditionFn:t,loadFn:n};u.push(a),1===u.length&&e.on("window:throttledScroll",d),s()}function r(e,a,o){n.read(function(){var n=t(e);i(function(){var t=n.offset(),e=t.top-a,o=t.top+t.height+a;return l.top>e&&l.bottom<o},o)})}var s,u=[],l={top:0,bottom:0},d=function(){l.top=window.pageYOffset,l.bottom=l.top+t.viewport().height,u=a(u,function(t){if(!t.conditionFn())return!0;t.loadFn()}),0===u.length&&e.off("window:throttledScroll",d)};return s=o(d,2e3),{add:r}}.apply(e,a))&&(t.exports=o)},480:function(t,e,n){var a,o;a=[e,n(24),n(442)],void 0!==(o=function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldHideFlashingElements=void 0;var o=a(e),i=a(n),r=function(t){i.default.isOn("flashing-elements")?t&&t():o.default.write(function(){document.body&&document.body.classList.add("disable-flashing-elements"),t&&t()})};t.shouldHideFlashingElements=r}.apply(e,a))&&(t.exports=o)},481:function(t,e,n){var a,o;a=[n(66),n(33),n(10),n(2)],void 0!==(o=function(t,e,n,a){function o(o){var l=!0;if(!o)return l;var c=d.call(o),f=o.length;return c==r||c==u||(a.argsClass?c==i:e(o))||c==s&&"number"==typeof f&&n(o.splice)?!f:(t(o,function(){return l=!1}),l)}var i="[object Arguments]",r="[object Array]",s="[object Object]",u="[object String]",l=Object.prototype,d=l.toString;return o}.apply(e,a))&&(t.exports=o)},712:function(t,e,n){var a,o;a=[n(17),n(18),n(31),n(0),n(14),n(4),n(224),n(19),n(243),n(480),n(461),n(713),n(716),n(717),n(718),n(719),n(720),n(723),n(725),n(727),n(729)],void 0!==(o=function(t,e,n,a,o,i,r,s,u,l,d,c,f,h,p,v,g,m,y,w,_){var b={showSnaps:function(){m.init(),i.on("modules:container:rendered",m.init)},showContainerShowMore:function(){i.addListeners({"modules:container:rendered":p.init,"page:front:ready":p.init})},showContainerToggle:function(){var t=function(t){n(".js-container--toggle",n(t||document)[0]).each(function(t){new h.ContainerToggle(t).addToggle()})};i.addListeners({"page:front:ready":t,"modules:geomostpopular:ready":_(t,".js-popular-trails")})},upgradeMostPopularToGeo:function(){a.switches.geoMostPopular&&(new f.GeoMostPopularFront).go()},showWeather:function(){a.switches.weather&&i.on("page:front:ready",function(){w.Weather.init()})},showLiveblogUpdates:function(){o.isBreakpoint({min:"desktop"})&&i.on("page:front:ready",function(){g.showUpdatesFromLiveBlog()})},finished:function(){i.emit("page:front:ready")}};return{init:function(){r.catchErrorsWithContext([["f-accessibility",l.shouldHideFlashingElements],["f-snaps",b.showSnaps],["f-show-more",b.showContainerShowMore],["f-container-toggle",b.showContainerToggle],["f-geo-most-popular",b.upgradeMostPopularToGeo],["f-lazy-load-containers",v.lazyLoadContainers],["f-stocks",c],["f-sponsorship",y],["f-weather",b.showWeather],["f-live-blog-updates",b.showLiveblogUpdates],["f-finished",b.finished]])}}}.apply(e,a))&&(t.exports=o)},713:function(t,e,n){var a,o;a=[t,e,n(31),n(0),n(32),n(80),n(16),n(222),n(714),n(715)],void 0!==(o=function(t,e,n,a,o,i,r,s,u,l){"use strict";function d(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var c=d(n),f=d(a),h=d(o),p=d(i),v=d(r),g=d(u),m=d(l),y=function(){return-1!==["uk/business","us/business","au/business"].indexOf(f.default.page.pageId)},w=function(){return(0,h.default)("/business-data/stocks.json",{mode:"cors"}).catch(function(t){(0,p.default)(t,{feature:"stocks"})})},_=function(t){return t>0?"+"+t:""+t},b=function(t){var e=t.stocks.map(function(t){return(0,v.default)(g.default,{name:t.name,deltaClass:"stocks__stock-value--"+t.trend,price:t.price,change:_(t.change),closed:t.closed?'<div class="stocks__closed">closed</div>':"",closedInline:t.closed?'<div class="stocks__closed--inline">closed</div>':"",marketDownIcon:(0,s.inlineSvg)("marketDownIcon",["stocks__icon","stocks__icon--down"]),marketUpIcon:(0,s.inlineSvg)("marketUpIcon",["stocks__icon","stocks__icon--up"]),marketSameIcon:(0,s.inlineSvg)("marketSameIcon",["stocks__icon","stocks__icon--same"])})}).join("");return(0,v.default)(m.default,{stocks:e})};e.default=function(){var t=(0,c.default)(".js-container--first .js-container__header");y()&&t&&w().then(function(e){e&&e.stocks&&e.stocks.length>0&&t.append(b(e))})},t.exports=e.default}.apply(e,a))&&(t.exports=o)},714:function(t,e){t.exports='<div class="stocks__stock-value <%=deltaClass%>">\n    <div class="stocks__divider"></div>\n    <div class="stocks__name"><%=name%><%=closedInline%></div>\n    <div class="stocks__value">\n        <div class="stocks__price"><%=price%></div>\n        <%=marketDownIcon%>\n        <%=marketUpIcon%>\n        <%=marketSameIcon%>\n        <div class="stocks__change"><%=change%></div>\n    </div>\n    <%=closed%>\n</div>\n'},715:function(t,e){t.exports='<div class="stocks__stocks-container">\n    <%=stocks%>\n</div>\n'},716:function(t,e,n){var a,o;a=[e,n(21),n(39),n(81),n(82),n(18),n(31),n(0),n(4),n(421),n(50)],void 0!==(o=function(t,e,n,a,o,i,r,s,u,l,d){"use strict";function c(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.GeoMostPopularFront=void 0;var f=c(e),h=c(n),p=c(a),v=c(o),g=c(i),m=c(r),y=c(s),w=c(u),_=c(l),b=c(d),k=function(t){(0,m.default)(".js-tabs-content",t).addClass("tabs__content--no-border"),(0,m.default)(".js-tabs",t).addClass("u-h")};t.GeoMostPopularFront=function(t){function e(){(0,f.default)(this,e);var t=(0,p.default)(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return _.default.begin("most-popular"),t.endpoint="/most-read-geo.json",t.isNetworkFront="Network Front"===y.default.page.contentType,t.isVideoFront="video"===y.default.page.pageId,t.isInternational="international"===y.default.page.pageId,t.manipulationType="html",t}return(0,v.default)(e,t),(0,h.default)(e,[{key:"prerender",value:function(){this.elem=(0,g.default)(".headline-list",this.elem)[0]}},{key:"go",value:function(){var t=this.isNetworkFront?".js-tab-1":".js-tab-2";this.parent=(0,g.default)(".js-popular-trails")[0],this.parent&&(this.isInternational&&this.isNetworkFront||this.isVideoFront?k(this.parent):(this.tab=(0,g.default)(t,this.parent)[0],this.fetch(this.tab,"html")))}},{key:"ready",value:function(){this.isNetworkFront&&k(this.parent),_.default.end("most-popular"),w.default.emit("modules:geomostpopular:ready")}}]),e}(b.default)}.apply(e,a))&&(t.exports=o)},717:function(t,e,n){var a,o;a=[e,n(21),n(39),n(17),n(24),n(31),n(4),n(141),n(222)],void 0!==(o=function(t,e,n,a,o,i,r,s,u){"use strict";function l(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerToggle=void 0;var d=l(e),c=l(n),f=l(a),h=l(o),p=l(i),v=l(r),g=l(s),m="container-states",y={hidden:"Show",displayed:"Hide"},w=function(t){var e=t.text;return'\n    <button class="fc-container__toggle" data-link-name="'+t.dataLink+'">\n        '+t.icon+'\n        <span class="fc-container__toggle__text">'+e+"</span>\n    </button>\n"};t.ContainerToggle=function(){function t(e){(0,d.default)(this,t),this.$container=(0,f.default)(e),this.$button=(0,f.default)(f.default.create(w({text:"Hide",dataLink:"Show",icon:(0,u.inlineSvg)("arrowicon")}))),this.state="displayed"}return(0,c.default)(t,[{key:"buttonText",value:function(){return(0,p.default)(".fc-container__toggle__text",this.$button)}},{key:"updatePref",value:function(t){var e=g.default.get(m),n=t;"displayed"===this.state?delete e[n]:(e||(e={}),e[n]="closed"),g.default.set(m,e)}},{key:"setState",value:function(t){var e=this;this.state=t,h.default.write(function(){e.$container["displayed"===e.state?"removeClass":"addClass"]("fc-container--rolled-up"),e.$button.attr("data-link-name",y["displayed"===e.state?"hidden":"displayed"]),e.buttonText().text(y[e.state])})}},{key:"readPrefs",value:function(t){var e=g.default.get(m);e&&e[t]&&this.setState("hidden")}},{key:"addToggle",value:function(){var t=this,e=this.$container.attr("data-id"),n=(0,p.default)(".js-container__header",this.$container[0]);h.default.write(function(){n.append(t.$button),t.$container.removeClass("js-container--toggle").addClass("fc-container--has-toggle"),t.readPrefs(e)}),v.default.on("module:clickstream:click",function(n){n.target===t.$button[0]&&(t.setState("displayed"===t.state?"hidden":"displayed"),t.updatePref(e))})}}]),t}()}.apply(e,a))&&(t.exports=o)},718:function(t,e,n){var a,o;a=[e,n(21),n(39),n(17),n(24),n(18),n(31),n(0),n(32),n(4),n(80),n(262),n(141),n(531)],void 0!==(o=function(t,e,n,a,o,i,r,s,u,l,d,c,f,h){"use strict";function p(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(t,"__esModule",{value:!0}),t._=t.init=void 0;var v=p(e),g=p(n),m=p(a),y=p(o),w=p(i),_=p(r),b=p(s),k=p(u),j=p(l),C=p(d),M=p(c),x=p(f),S=p(h),$="js-button-text",L=Object.freeze({displayed:"displayed",loading:"loading",hidden:"hidden"}),F=function(t){var e=x.default.get("section-states",{type:"session"});return e&&e[t]?L.displayed:L.hidden},D=function(t,e){var n=x.default.get("section-states",{type:"session"})||{};e!==L.displayed?delete n[t]:n[t]="more",x.default.set("section-states",n,{type:"session"})},E=function(t,e){var n="/"+t+"/show-more/"+e+".json";return(0,M.default)(5e3,(0,k.default)(n,{mode:"cors"}))},I=function(t){return(0,S.default)((0,w.default)(".js-fc-item",t),function(t){return(0,m.default)(t).attr("data-id")})},T=function(t,e){var n=I(t),a=m.default.create(e);return(0,_.default)(".js-fc-item",a).each(function(t){var e=(0,m.default)(t);e.attr("data-id")in n&&e.remove()}),a},O=function(){function t(e,n){(0,v.default)(this,t),this.id=n.attr("data-id"),this.state=F(this.id),this.$el=e,this.$container=n,this.isLoaded=!1,this.$iconEl=(0,_.default)(".i",this.$el),this.$placeholder=(0,_.default)(".js-show-more-placeholder",this.$container),this.$textEl=(0,_.default)("."+$,this.$el),this.state===L.displayed&&this.loadShowMoreForContainer(),this.messages=new Map([[L.hidden,(0,_.default)(".js-button-text",this.$el).text()],[L.displayed,"Less"],[L.loading,"Loading&hellip;"]])}return(0,g.default)(t,[{key:"setState",value:function(t){this.$textEl.html(this.messages.get(t)),this.$el.attr("data-link-name",t===L.displayed?"less":"more").toggleClass("button--primary",t!==L.displayed).toggleClass("button--tertiary",t===L.displayed).toggleClass("collection__show-more--loading",t===L.loading),this.$container.toggleClass("fc-show-more--hidden",t!==L.displayed).toggleClass("fc-show-more--visible",t===L.displayed),this.state=t}},{key:"loadShowMoreForContainer",value:function(){var t=this;y.default.write(function(){t.setState(L.loading)}),E(b.default.page.pageId,this.id).then(function(e){var n=void 0,a=e.html.trim();a&&(n=T(t.$container,a)),y.default.write(function(){n&&t.$placeholder.replaceWith(n),t.setState(L.displayed),D(t.id,t.state),j.default.emit("modules:show-more:loaded")}),t.isLoaded=!0}).catch(function(e){y.default.write(function(){t.setState(L.hidden)}),t.showErrorMessage(),(0,C.default)(e,{feature:"container-show-more"},!1)})}},{key:"hideErrorMessage",value:function(){var t=this;y.default.write(function(){null!=t.$errorMessage&&t.$errorMessage.addClass("show-more__error-message--invisible")})}},{key:"showErrorMessage",value:function(){var t=this;this.$errorMessage&&this.$errorMessage.remove(),this.$errorMessage=(0,m.default)(m.default.create('<div class="show-more__error-message">Sorry, failed to load more stories. Please try again.</div>')),y.default.write(function(){null!=t.$errorMessage&&(t.$errorMessage.insertAfter(t.$el),setTimeout(function(){t.hideErrorMessage()},5e3))})}}]),t}(),P=function(t){y.default.write(function(){t.setState(t.state===L.hidden?L.displayed:L.hidden),D(t.id,t.state)})},N=function(t){y.default.write(function(){t.$container.addClass("fc-show-more--hidden").removeClass("js-container--fc-show-more").toggleClass("fc-show-more--hidden",t.state===L.hidden),t.setState(t.state)})};t.init=function(){y.default.read(function(){var t=(0,w.default)(".js-container--fc-show-more").map(m.default),e=t.map(function(t){var e=(0,_.default)(".js-show-more-button",t);return e?new O(e,t):null}).filter(function(t){return null!=t});e.forEach(N),j.default.on("module:clickstream:click",function(t){var n=e.find(function(e){return e.$el[0]===t.target});n&&n.state!==L.loading&&(n.isLoaded?P(n):(n.$errorMessage&&n.$errorMessage.hide(),n.loadShowMoreForContainer()))})})},t._={itemsByArticleId:I,dedupShowMore:T}}.apply(e,a))&&(t.exports=o)},719:function(t,e,n){var a,o;a=[e,n(24),n(18),n(14),n(4),n(236)],void 0!==(o=function(t,e,n,a,o,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.lazyLoadContainers=void 0;var s=r(e),u=r(n),l=r(a),d=r(o),c=r(i),f=l.default.getViewport().height,h=function(t){var e=t.nextElementSibling,n=e?e.getBoundingClientRect().top:0;return-f<n&&n<2*f},p=function(t){t.classList.remove("fc-container--lazy-load")};t.lazyLoadContainers=function(){var t=(0,u.default)(".js-container--lazy-load"),e=(0,c.default)(function(){0===t.length?d.default.off("window:throttledScroll",e):s.default.read(function(){var e=t.reduce(function(t,e){return t[h(e)?"in":"out"].push(e),t},{in:[],out:[]});t=e.out,s.default.write(function(){e.in.forEach(p)})})},500);d.default.on("window:throttledScroll",e),e()}}.apply(e,a))&&(t.exports=o)},720:function(t,e,n){var a,o;a=[e,n(17),n(422),n(31),n(14),n(64),n(32),n(4),n(19),n(16),n(721),n(722),n(46),n(481)],void 0!==(o=function(t,e,n,a,o,i,r,s,u,l,d,c,f,h){"use strict";function p(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.showUpdatesFromLiveBlog=void 0;var v=p(e),g=p(n),m=p(a),y=p(o),w=p(i),_=p(r),b=p(s),k=p(l),j=p(d),C=p(c),M=p(f),x=p(h),S=30,$=5,L=y.default.getViewport().height,F=function(t){var e=(t||{}).publishedDateTime;return!!e&&g.default.makeRelativeDate(new Date(e))||""},D=function(t,e,n){var a=F(e);return a=a.match(/yesterday/i)?a.toLowerCase():a?"Latest update "+a+" ago":"Updated just now",(0,k.default)(j.default,{ariaHidden:!e.isNew,href:"/"+t+"#"+e.id,relativeTime:a,text:[e.title,e.body.slice(0,500)].filter(function(t){return null!=t}).join(". "),index:n+1})},E=function(t,e){return w.default.read(function(){return t.getBoundingClientRect().top}).then(function(n){return n>0&&n<L&&(setTimeout(function(){var e=(0,v.default)(t);w.default.write(function(){e.removeClass("fc-item__liveblog-blocks__inner--offset")})},e?0:2e3),!0)})},I=function(t){E(t).then(function(e){var n=void 0;e||(n=(0,M.default)(function(){E(t,!0).then(function(t){t&&b.default.off("window:throttledScroll",n)})},500),b.default.on("window:throttledScroll",n))})},T=function(t,e,n,a){var o=(0,C.default)(a);e.forEach(function(e){var i=!1,r=["fc-item__liveblog-blocks__inner","u-faux-block-link__promote"],s=n.slice(0,2).map(function(e,n){return!i&&(e.publishedDateTime>a||o)&&(e.isNew=!0,i=!0,r.push("fc-item__liveblog-blocks__inner--offset")),D(t,e,n)}).slice(0,i?2:1),u=v.default.create('<div class="'+r.join(" ")+'">'+s.join("")+"</div>"),l=(0,v.default)(e);w.default.write(function(){l.empty().append(u)}).then(function(){i&&I(u[0])})})},O=function(t){return t.filter(function(t){return t.id&&t.publishedDateTime&&t.body&&t.body.length>=10})},P=function t(){return w.default.read(function(){var t=new Map;return(0,m.default)(".js-liveblog-blocks").each(function(e){var n=e.getAttribute("data-article-id");if(n){var a=t.get(n)||[];a.push(e),t.set(n,a)}}),t}).then(function(e){var n=void 0;(0,x.default)(e)||(n=u.session.get("gu.liveblog.block-dates")||{},e.forEach(function(t,e){(0,_.default)("/"+e+".json?rendered=false",{mode:"cors"}).then(function(a){var o=a&&O(a.blocks);o&&o.length&&(T(e,t,o,n[e]),n[e]=o[0].publishedDateTime,u.session.set("gu.liveblog.block-dates",n))}).catch(function(){})}),$&&($-=1,setTimeout(function(){t()},1e3*S),S*=1))})};t.showUpdatesFromLiveBlog=P}.apply(e,a))&&(t.exports=o)},721:function(t,e){t.exports='<a href="<%=href%>" class="fc-item__liveblog-block" data-link-name="block | <%=index%>" aria-hidden="<%=ariaHidden%>">\n    <div class="fc-item__liveblog-block__text">\n        <div class="fc-item__liveblog-block__time"><%=relativeTime%></div>\n        <%=text%>\n    </div>\n</a>\n'},722:function(t,e,n){var a,o;a=[],void 0!==(o=function(){function t(t){return void 0===t}return t}.apply(e,a))&&(t.exports=o)},723:function(t,e,n){var a,o;a=[n(23),n(17),n(24),n(31),n(14),n(55),n(4),n(16),n(243),n(443),n(80),n(422),n(724),n(194),n(228)],void 0!==(o=function(t,e,n,a,o,i,r,s,u,l,d,c,f,h,p){function v(){u(a(".facia-snap-embed")).forEach(b),u(a(".js-snappable.js-snap")).filter(function(t){var e=a(t).hasClass("facia-snap-embed"),n=t.getAttribute("data-snap-type");return!e&&n&&k.indexOf(n)>-1}).filter(function(t){return t.getAttribute("data-snap-uri")}).forEach(_)}function g(t,e){m(t,e),a(t).hasClass("facia-snap--football")&&f.resizeForFootballSnaps(t)}function m(t,a){var o,i,r=e(t);i=[{width:0,name:"tiny"},{width:180,name:"mini"},{width:220,name:"small"},{width:300,name:"medium"},{width:700,name:"large"},{width:940,name:"huge"}],n.read(function(){o=t.offsetWidth}),n.write(function(){i.map(function(t,e,n){var i=o>=t.width&&(!n[e+1]||o<n[e+1].width);return t.action=i?"addClass":!!a&&"removeClass",t}).filter(function(t){return t.action}).forEach(function(t){r[t.action]("facia-snap-point--"+t.name)})})}function y(t){var a=e(t).offset(),o=Math.ceil((a.width||0)/2),i=t.getAttribute("data-snap-uri"),r=Math.min(Math.max(a.height||0,o),400),s=e.create('<div style="width: 100%; height: '+r+'px; overflow: hidden; -webkit-overflow-scrolling:touch"></div>')[0],u=e.create('<iframe src="'+i+'" style="width: 100%; height: 100%; border: none;"></iframe>')[0];e(s).append(u),j.push(u),C(),n.write(function(){e(t).empty().append(s)})}function w(t,o){i(t.getAttribute("data-snap-uri"),{mode:"cors"}).then(function(t){return t.ok?o?t.json().then(function(t){return t.html}):t.text():Promise.reject(new Error("Fetch error: "+t.statusText))}).then(function(o){a.create(o).each(function(a){n.write(function(){e(t).html(a)})}),c.init(t)}).catch(function(t){d(t,{feature:"snaps"})})}function _(t){l.add(t,1500,function(){switch(n.write(function(){e(t).addClass("facia-snap-embed")}),g(t),t.getAttribute("data-snap-type")){case"document":y(t);break;case"fragment":w(t);break;case"json.html":w(t,!0)}o.isIOS||r.on("window:throttledResize",function(){g(t,!0)})})}function b(t){g(t),o.isIOS||r.on("window:throttledResize",function(){g(t,!0)})}var k=["document","fragment","json.html"],j=[],C=h(function(){t.on(window,"message",function(t){var n,a=p(j,function(e){return e.contentWindow===t.source});a&&(n=JSON.parse(t.data),"set-height"===n.type&&e(a).parent().css("height",n.value))})});return{init:v}}.apply(e,a))&&(t.exports=o)},724:function(t,e,n){var a,o;a=[e,n(17),n(14)],void 0!==(o=function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.resizeForFootballSnaps=void 0;var o=a(e),i=a(n);t.resizeForFootballSnaps=function(t){if("mobile"!==i.default.getBreakpoint()&&t){var e=(0,o.default)(t);e.css("height",e.parent().css("height"))}}}.apply(e,a))&&(t.exports=o)},725:function(t,e,n){var a,o;a=[n(23),n(17),n(24),n(18),n(223),n(726)],void 0!==(o=function(t,e,n,a,o,i){function r(){return new Promise(function(e){var n=function(a){d.push(a.keyCode),i(c.slice(0,d.length),d)?d.length===c.length&&(e(),t.off(document,"keydown",n)):d=[]};t.on(document,"keydown",n)})}function s(t,e){return Math.floor(Math.random()*(e-t+1))+t}function u(){return f[s(0,f.length-1)]}function l(){var t=o(a(".js-fc-item"),e);setInterval(function(){n.write(function(){t.forEach(function(t){f.forEach(function(e){t.removeClass(e)}),t.addClass(u())})})},1e3)}var d=[],c=[38,38,40,40,37,39,37,39,66,65],f=o(["special-report","live","dead","feature","editorial","comment","podcast","media","analysis","review","letters","external","news"],function(t){return"tone-"+t+"--item"});return function(){r().then(l)}}.apply(e,a))&&(t.exports=o)},726:function(t,e,n){var a,o;a=[n(34),n(151)],void 0!==(o=function(t,e){function n(n,a,o,i){return e(n,a,"function"==typeof o&&t(o,i,2))}return n}.apply(e,a))&&(t.exports=o)},727:function(t,e,n){var a,o;a=[e,n(23),n(80),n(31),n(0),n(32),n(4),n(141),n(728)],void 0!==(o=function(t,e,n,a,o,i,r,s,u){"use strict";function l(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(t,"__esModule",{value:!0}),t._=t.Weather=void 0;var d=l(e),c=l(n),f=l(a),h=l(o),p=l(i),v=l(r),g=l(s),m=null,y=null,w=!1,_="weather-location",b=function(){return["uk","us","au","international"].includes(h.default.page.pageId)};t.Weather={init:function(){if(!h.default.switches||!h.default.switches.weather||!b())return!1;this.getDefaultLocation()},getUserLocation:function(){var t=g.default.get(_);if(t&&t.id)return t},getWeatherData:function(t){return(0,p.default)(t,{mode:"cors"})},saveUserLocation:function(t){g.default.set(_,{id:t.id,city:t.city})},getDefaultLocation:function(){var t=this,e=this.getUserLocation();return e?this.fetchWeatherData(e):this.getWeatherData(h.default.page.weatherapiurl+".json").then(function(e){t.fetchWeatherData(e)}).catch(function(t){(0,c.default)(t,{feature:"weather"})})},fetchWeatherData:function(t){var e=this,n=h.default.page.weatherapiurl,a=h.default.page.edition;return this.getWeatherData(n+"/"+t.id+".json?_edition="+a.toLowerCase()).then(function(n){e.render(n,t.city),e.fetchForecastData(t)}).catch(function(t){(0,c.default)(t,{feature:"weather"})})},clearLocation:function(){g.default.remove(_),null!==y&&y.setInputValue()},fetchForecastData:function(t){var e=this;return this.getWeatherData(h.default.page.forecastsapiurl+"/"+t.id+".json?_edition="+h.default.page.edition.toLowerCase()).then(function(t){e.renderForecast(t)}).catch(function(t){(0,c.default)(t,{feature:"weather"})})},saveDeleteLocalStorage:function(t){var e=this;"set"===t.store?(this.saveUserLocation(t),this.fetchWeatherData(t).then(function(){return e.toggleForecast()})):"remove"===t.store&&(this.clearLocation(),this.getDefaultLocation())},bindEvents:function(){var t=this;d.default.on(document.body,"click",".js-toggle-forecast",function(e){e.preventDefault(),t.toggleForecast()}),v.default.on("autocomplete:fetch",this.saveDeleteLocalStorage.bind(this))},toggleForecast:function(){(0,f.default)(".weather").toggleClass("is-expanded")},addSearch:function(){y=new u.SearchTool({container:(0,f.default)(".js-search-tool"),apiUrl:h.default.page.locationapiurl})},render:function(t,e){this.attachToDOM(t.html,e),w||(this.bindEvents(),w=!0),null===y?this.addSearch():y.bindElements((0,f.default)(".js-search-tool"))},attachToDOM:function(t,e){m=(0,f.default)("#headlines .js-container__header"),(0,f.default)(".js-weather",m).remove(),m.append(t.replace(new RegExp("<%=city%>","g"),e))},renderForecast:function(t){var e=(0,f.default)(".js-weather-forecast"),n=t.html;e.empty().html(n)}},t._={isNetworkFront:b}}.apply(e,a))&&(t.exports=o)},728:function(t,e,n){var a,o;a=[e,n(21),n(39),n(23),n(31),n(32),n(4),n(80),n(17)],void 0!==(o=function(t,e,n,a,o,i,r,s,u){"use strict";function l(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.SearchTool=void 0;var d=l(e),c=l(n),f=l(a),h=l(o),p=l(i),v=l(r),g=l(s),m=(l(u),{13:"enter",38:"up",40:"down",27:"escape"});t.SearchTool=function(){function t(e){(0,d.default)(this,t);var n=e.container;this.apiUrl=e.apiUrl,this.bindElements(n),this.bindEvents(),this.oldQuery="",this.newQuery="",this.inputTmp=""}return(0,c.default)(t,[{key:"bindElements",value:function(t){this.$list=(0,h.default)(".js-search-tool-list",t),this.$input=(0,h.default)(".js-search-tool-input",t)}},{key:"bindEvents",value:function(){f.default.on(document.body,"keyup",this.handleKeyEvents.bind(this)),f.default.on(document.body,"click",this.handleClick.bind(this)),v.default.on("autocomplete:toggle",this.toggleControls.bind(this))}},{key:"hasInputValueChanged",value:function(){return this.oldQuery.length!==this.newQuery.length}},{key:"handleClick",value:function(e){var n=(0,h.default)(e.target).hasClass("js-search-tool-input"),a=t.nearestLinkNode(e.target);n?(e.preventDefault(),v.default.emit("autocomplete:toggle",!0)):a?(e.preventDefault(),(0,h.default)(".active",this.$list).removeClass("active"),(0,h.default)(a).addClass("active"),this.pushData()):v.default.emit("autocomplete:toggle",!1)}},{key:"toggleControls",value:function(t){var e=(0,h.default)(".js-search-tool-input")[0],n=(0,h.default)(".js-search-tool"),a=(0,h.default)(".js-close-location"),o=(0,h.default)(".js-edit-location");t?(this.inputTmp=e.value,n.addClass("is-editing"),e.setSelectionRange(0,e.value.length),a.removeClass("u-h"),o.addClass("u-h")):(n.removeClass("is-editing"),this.clear(),this.setInputValue(this.inputTmp),a.addClass("u-h"),o.removeClass("u-h"))}},{key:"pushData",value:function(){var t=(0,h.default)(".active",this.$list),e="set";if(0===t.length){if(""!==this.$input.val())return;e="remove"}var n={id:t.attr("data-weather-id"),city:t.attr("data-weather-city"),store:e};v.default.emit("autocomplete:fetch",n),this.setInputValue(),this.inputTmp=n.city,this.$input.blur(),setTimeout(this.destroy.bind(this),50)}},{key:"getListOfResults",value:function(t){if(this.newQuery=t.target.value,!t.target.value.match(/\S/))return this.clear(),void(this.oldQuery="");this.hasInputValueChanged()&&this.fetchData()}},{key:"fetchData",value:function(){var t=this;return(0,p.default)(""+this.apiUrl+this.newQuery,{mode:"cors"}).then(function(e){t.renderList(e,5),t.oldQuery=t.newQuery}).catch(function(t){(0,g.default)(t,{feature:"search-tool"})})}},{key:"handleKeyEvents",value:function(t){var e=m[t.which||t.keyCode];(0,h.default)(t.target).hasClass("js-search-tool-input")&&("down"===e?(t.preventDefault(),this.move(1)):"up"===e?(t.preventDefault(),this.move(-1)):"enter"===e?this.pushData():"escape"===e?this.toggleControls():this.getListOfResults(t))}},{key:"move",value:function(t){var e=(0,h.default)(".active",this.$list),n=parseInt(e.attr("id"),10);isNaN(n)&&(n=-1),e.removeClass("active"),this.getNewId(n+t)<0?this.setInputValue(this.oldQuery):((0,h.default)("#"+this.getNewId(n+t)+"sti",this.$list).addClass("active"),this.setInputValue())}},{key:"getNewId",value:function(t){var e=(0,h.default)("li",this.$list).length,n=t%e;return n<-1?n=e-1:t===e&&(n=-1),n}},{key:"setInputValue",value:function(t){var e=t||(0,h.default)(".active",this.$list).attr("data-weather-city");this.$input.val(e)}},{key:"renderList",value:function(t,e){var n=document.createDocumentFragment(),a=t.length-e;t.slice(0,a).forEach(function(t,e){var a=document.createElement("li");a.className="search-tool__item",a.innerHTML='<a role="button" href="#'+t.id+'" id="'+e+'sti" class="js-search-tool-link search-tool__link'+(0===e?' active"':'"')+' data-link-name="weather-search-tool" data-weather-id="'+t.id+'" data-weather-city="'+t.city+'">'+t.city+' <span class="search-tool__meta">'+t.country+"</span></a>",n.appendChild(a)}),this.clear().append(n)}},{key:"clear",value:function(){return this.$list.html("")}},{key:"destroy",value:function(){this.clear()}}],[{key:"nearestLinkNode",value:function(t){return(0,h.default)(t).hasClass("js-search-tool-link")?t:h.default.ancestor(t,"js-search-tool-link")}}]),t}()}.apply(e,a))&&(t.exports=o)},729:function(t,e,n){var a,o;a=[n(97),n(9)],void 0!==(o=function(t,e){function n(n){return t(n,16,e(arguments,1))}return n}.apply(e,a))&&(t.exports=o)}});
//# sourceMappingURL=graun.facia.js.map